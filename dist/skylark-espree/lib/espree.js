/**
 * skylark-espree - A version of espree that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./token-translator","./options"],function(e,t){const{normalizeOptions:n}=t,s=Symbol("espree's internal state"),o=Symbol("espree's esprimaFinishNode");return()=>t=>{const r=Object.assign({},t.acorn.tokTypes);return t.acornJsx&&Object.assign(r,t.acornJsx.tokTypes),class extends t{constructor(t,o){"object"==typeof t&&null!==t||(t={}),"string"==typeof o||o instanceof String||(o=String(o));const i=t.sourceType,a=n(t),c=a.ecmaFeatures||{},l=!0===a.tokens?new e(r,o):null,u={originalSourceType:i||a.sourceType,tokens:l?[]:null,comments:!0===a.comment?[]:null,impliedStrict:!0===c.impliedStrict&&a.ecmaVersion>=5,ecmaVersion:a.ecmaVersion,jsxAttrValueToken:!1,lastToken:null,templateElements:[]};super({ecmaVersion:a.ecmaVersion,sourceType:a.sourceType,ranges:a.ranges,locations:a.locations,allowReserved:a.allowReserved,allowReturnOutsideFunction:a.allowReturnOutsideFunction,onToken:e=>{l&&l.onToken(e,u),e.type!==r.eof&&(u.lastToken=e)},onComment:(e,t,n,s,r,i)=>{if(u.comments){const a=function(e,t,n,s,o,r,i){let a;const c={type:a=e?"Block":"#!"===i.slice(n,n+2)?"Hashbang":"Line",value:t};return"number"==typeof n&&(c.start=n,c.end=s,c.range=[n,s]),"object"==typeof o&&(c.loc={start:o,end:r}),c}(e,t,n,s,r,i,o);u.comments.push(a)}}},o),this[s]=u}tokenize(){do{this.next()}while(this.type!==r.eof);this.next();const e=this[s],t=e.tokens;return e.comments&&(t.comments=e.comments),t}finishNode(...e){const t=super.finishNode(...e);return this[o](t)}finishNodeAt(...e){const t=super.finishNodeAt(...e);return this[o](t)}parse(){const e=this[s],t=super.parse();if(t.sourceType=e.originalSourceType,e.comments&&(t.comments=e.comments),e.tokens&&(t.tokens=e.tokens),t.body.length){const[e]=t.body;t.range&&(t.range[0]=e.range[0]),t.loc&&(t.loc.start=e.loc.start),t.start=e.start}return e.lastToken&&(t.range&&(t.range[1]=e.lastToken.range[1]),t.loc&&(t.loc.end=e.lastToken.loc.end),t.end=e.lastToken.end),this[s].templateElements.forEach(e=>{const t=e.tail?1:2;e.start+=-1,e.end+=t,e.range&&(e.range[0]+=-1,e.range[1]+=t),e.loc&&(e.loc.start.column+=-1,e.loc.end.column+=t)}),t}parseTopLevel(e){return this[s].impliedStrict&&(this.strict=!0),super.parseTopLevel(e)}raise(e,n){const s=t.acorn.getLineInfo(this.input,e),o=new SyntaxError(n);throw o.index=e,o.lineNumber=s.line,o.column=s.column+1,o}raiseRecoverable(e,t){this.raise(e,t)}unexpected(e){let t="Unexpected token";if(null!==e&&void 0!==e){if(this.pos=e,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}this.end>this.start&&(t+=` ${this.input.slice(this.start,this.end)}`),this.raise(this.start,t)}jsx_readString(e){const t=super.jsx_readString(e);return this.type===r.string&&(this[s].jsxAttrValueToken=!0),t}[o](e){return"TemplateElement"===e.type&&this[s].templateElements.push(e),e.type.includes("Function")&&!e.generator&&(e.generator=!1),e}}}});
//# sourceMappingURL=../sourcemaps/lib/espree.js.map
